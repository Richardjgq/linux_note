# 用户\(user\)和用户组\(group\)存储文件

```
# 配置文件
/etc/passwd # 用户(user)的配置文件;
/etc/shadow # 用户(user)影子口令文件;
/etc/group # 用户组(group)配置文件;
/etc/gshadow # 用户组(group)的影子文件;
/etc/skel # 用户的骨架目录,每次新建用户时都会将这个目录下的文件复制到用户家目录下来布置环境;
/etc/login.defs # 用户创建规则配置文件;
```

**/etc/passwd**

* 用户名
* 用户密码\(默认为x,加密后的字符串放在/etc/shadow中\)
* 用户ID\(uid\)
* 用户初始组ID\(gid\)
* 用户描述信息\(可用chfn修改,可用finger查询\)
* 用户家目录
* 用户使用哪种shell\(在**/etc/shells**下是规定了可以使用的Shell\)

```
headplan:x:1001:1001:My Username:/home/headplan:/bin/bash
```

**/etc/shadow**

* 用户名
* 用户加密的密码
* 上次修改密码的时间\(上次修改距离1970/1/1的天数.17000/365+1970\)
* 密码最短修改时间间隔
* 密码最长修改时间间隔
* 密码警告时间\(密码距离到达第四个字段多长时间时需要会发出警告\)
* 非活跃期\(当密码过期后还有多少天可以使用\)
* 密码到期日\(过了这个时间用户就无法使用了\)

```
headplan:$6$F43...:17000:0:99999:7:::
```

**/etc/group**

* 用户名\(也就是这个用户的初始组\)
* 加密的组密码
* 组ID\(gid\)
* 组的用户\(以这个组为附加值的用户\)

```
headplan:x:1001:vagrant
```

初始组与附加组的概念:

> 用一个通俗的解释,你刚出生时只属于一个组,就是你的家,而且这个组一般是不会变的,这个家就是你的初始组,生你的时候家必须存在,所以用-g指定的那个组,也就必须存在;随着你的长大,你又加入了很多组,比如小学,初中,高中,大学等等,但是这些组不会覆盖你的初始组,你还是属于你的家,这就是附加组.

**/etc/gshadow**

* 用户名\(也就是这个用户的初始组\)
* 加密的组密码\(!表示还没有设置\)
* 组的用户\(以这个组为附加值的用户\)

```
headplan:!::vagrant
```

**/etc/skel**

> 用户的骨架目录,每次新建用户时都会将这个目录下的文件复制到用户家目录下来布置环境.

/etc/skel目录一般是存放用户启动文件的目录,这个目录是由root权限控制.当我们添加用户时,这个目录下的文件自动复制到新添加的用户的家目录下./etc/skel目录下的文件都是隐藏文件,也就是类似.file格式的.我们可通过修改、添加、删除/etc/skel目录下的文件,来为用户提供一个统一、标准的、默认的用户环境.

> 注意:目录下的文件,一般是用useradd或adduser命令添加用户\(user\)时,系统自动复制到新添加用户\(user\)的家目录下.如果通过修改/etc/passwd来添加用户时,可以自己创建用户的家目录,然后把/etc/skel下的文件复制到用户的家目录下,然后要用chown来改变新用户家目录的属主.

**/etc/login.defs**

> 文件是创建用户时的一些规划,比如创建用户时,是否需要家目录,UID和GID的范围,用户的期限等等.文件可以通过root来定义.
>
> 注意:该文件里的配置对root用户无效.如果/etc/shadow文件里有相同的选项,则以/etc/shadow里的设置为准,也就是说/etc/shadow的配置优先级高于/etc/login.defs
>
> 更多关于密码加固的策略在/etc/pam.d/system-auth中配置,这里可以另开一个文档记录







