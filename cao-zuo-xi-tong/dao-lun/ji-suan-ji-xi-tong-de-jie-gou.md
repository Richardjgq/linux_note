# 计算机系统的结构

### 计算机系统操作

现代通用计算机系统由一个或多个CPU和若干设备控制器通过共同的总线相连而成 , 该总线提供了对共享内存的访问 . 每个设备控制器负责一种特定类型的设备 . CPU与设备控制器可以并发工作 , 并竞争内存周期 , 确保对共享内存的有序访问 , 需要内存控制器来协调对内存的访问 .

计算机开始运行 , 需要运行一个比较简单的初始化程序或**引导程序** , 通常位于ROM或EEPROM中 , 称为计算机硬件中的固件 . 它初始化系统中的所有部分 , 包括CPU寄存器 , 设备控制器 , 内存内容等 . 引导程序必须知道如何装入操作系统并开始执行系统 , 所以必须定位操作系统内核 , 并把它装入内存 . 然后操作系统开始执行第一个进程 , 如init , 并等待事件的发生 .

#### interrupt中断

事件的发生通常通过硬件或软件的**中断**来表示 . 硬件可以随时通过系统总线向CPU发送信号 , 触发中断 . 软件通过执行特定的操作 , 比如系统调用\(system call\)也叫**监视器调用** , 来触发中断 .

**所谓中断 , 是指CPU在正常执行程序的过程中 , 由于某个外部或内部事件的作用 , 强迫CPU停止当前正在执行的程序 , 转去为该事件服务\(称为中断服务\) , 待服务结束后 , 又能自动返回到被中断的程序中继续执行 . **

中断是计算机结构的重要部分 . 中断机制不同 , 但有些功能是共同的 .

中断必须将控制转移到何时的中断处理程序 . 转移的方法是调用一个通用子程序以检查中断信息 , 然后子程序调用相应的中断处理程序 . 因为处理中断要快 , 许多操作系统 , 例如Windows或UNIX都采用**中断向量表**的方式处理中断 .

> **中断向量表** , 即指针表位于低地址内存\(前100左右的位置 , 内存中0-1KB的位置\) , 这里包含了各种设备的中断处理子程序的地址 , 通过唯一设备号来索引 , 提供设备的中断处理子程序的地址 .

#### 存储结构

计算机程序必须在内存中以便操作 . 而内存是处理器可以直接访问的唯一的大容量存储区域 . 它通常是用被称为动态随机访问内存的半导体技术来实现的 , 是一组内存字的数组 , 每个字都有其地址 . 通过对特定内存地址执行一系列load或store指令来实现交互 . 指令load能将内存中的字移到CPU的寄存器中 , 而指令store能将寄存器的内容移到内存 . 当然CPU还可以从内存中装入指令来执行 .

冯诺依曼体系结构的一个典型指令执行周期 , 首先从内存中获取指令 , 并保存在**指令寄存器**中 , 接着指令被解码 , 并可能导致从内存中获取操作数或将操作数保存在内部寄存器中 . 在指令完成对操作数的执行后 , 其结果可以存回到内存 . 这里内存单元只能看见内存地址流 , 并不知道它们是如何产生的 , 也不知道他们是什么地址 . 相应的 , 护士程序如何产生内存地址 , 只对程序运行所生成的地址序列感兴趣 .

![](/assets/fnym.png)

理想的情况下 , 程序和数据都永久的驻留在内存中 , 但内存太小且属于掉电会失去所有内容 , 所以通常计算机系统都提供辅存来作为内存的扩充 , 即能永久的存储大量的数据 .

常用的辅存设备就是磁盘 , 用来存储程序和数据 . 绝大多数程序都保存在磁盘上 , 例如浏览器 , 编译器 , 字处理器等等 . 直到要执行时才装入到内存 .

前面提到的存储结构由寄存器 , 内存和磁盘组成 , 除此之外还有告诉缓存 , CD-ROM , 磁带等等 . 总之一个完整存储系统的设计必须平衡所有因素 , 即对存储器的易失性的控制 , 对于访问时间或传输速率 , 还可以使用告诉缓存来改善性能 .

---

#### IO结构

